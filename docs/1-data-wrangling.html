<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Data Wrangling | STA 141 - Exploratory Data Analysis and Visualization</title>
  <meta name="description" content="Chapter 1 Data Wrangling | STA 141 - Exploratory Data Analysis and Visualization" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Data Wrangling | STA 141 - Exploratory Data Analysis and Visualization" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="dereksonderegger/141" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Data Wrangling | STA 141 - Exploratory Data Analysis and Visualization" />
  
  
  

<meta name="author" content="Derek L. Sonderegger" />


<meta name="date" content="2020-04-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="2-graphing-principles.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<br> &nbsp;&nbsp; Exploratory Visual Data Analysis <br><br>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#instructional-material"><i class="fa fa-check"></i><b>0.1</b> Instructional Material</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#data-sources"><i class="fa fa-check"></i><b>0.2</b> Data Sources</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>0.3</b> Introduction</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#pedigogical-plan"><i class="fa fa-check"></i><b>0.4</b> Pedigogical Plan</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html"><i class="fa fa-check"></i><b>1</b> Data Wrangling</a><ul>
<li class="chapter" data-level="1.1" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#introduction-1"><i class="fa fa-check"></i><b>1.1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1.1" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#tidying"><i class="fa fa-check"></i><b>1.1.1</b> Tidying</a></li>
<li class="chapter" data-level="1.1.2" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#cleaning"><i class="fa fa-check"></i><b>1.1.2</b> Cleaning</a></li>
<li class="chapter" data-level="1.1.3" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#use"><i class="fa fa-check"></i><b>1.1.3</b> Use</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#tableau"><i class="fa fa-check"></i><b>1.2</b> Tableau</a></li>
<li class="chapter" data-level="1.3" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#importing-data"><i class="fa fa-check"></i><b>1.3</b> Importing data</a></li>
<li class="chapter" data-level="1.4" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#tidying-or-reshaping"><i class="fa fa-check"></i><b>1.4</b> Tidying or Reshaping</a><ul>
<li class="chapter" data-level="1.4.1" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#gather"><i class="fa fa-check"></i><b>1.4.1</b> Gather</a></li>
<li class="chapter" data-level="1.4.2" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#spread"><i class="fa fa-check"></i><b>1.4.2</b> Spread</a></li>
<li class="chapter" data-level="1.4.3" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#column-splitting"><i class="fa fa-check"></i><b>1.4.3</b> Column Splitting</a></li>
<li class="chapter" data-level="1.4.4" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#new-column-via-calculation"><i class="fa fa-check"></i><b>1.4.4</b> New Column via Calculation</a></li>
<li class="chapter" data-level="1.4.5" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#aggregation"><i class="fa fa-check"></i><b>1.4.5</b> Aggregation</a></li>
<li class="chapter" data-level="1.4.6" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#new-column-with-aggregation"><i class="fa fa-check"></i><b>1.4.6</b> New Column with Aggregation</a></li>
<li class="chapter" data-level="1.4.7" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#unions"><i class="fa fa-check"></i><b>1.4.7</b> Unions</a></li>
<li class="chapter" data-level="1.4.8" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#joins"><i class="fa fa-check"></i><b>1.4.8</b> Joins</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="1-data-wrangling.html"><a href="1-data-wrangling.html#exercises"><i class="fa fa-check"></i><b>1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-graphing-principles.html"><a href="2-graphing-principles.html"><i class="fa fa-check"></i><b>2</b> Graphing Principles</a><ul>
<li class="chapter" data-level="2.1" data-path="2-graphing-principles.html"><a href="2-graphing-principles.html#elementary-perception-tasks"><i class="fa fa-check"></i><b>2.1</b> Elementary Perception Tasks</a></li>
<li class="chapter" data-level="2.2" data-path="2-graphing-principles.html"><a href="2-graphing-principles.html#groupings-gestalt"><i class="fa fa-check"></i><b>2.2</b> Groupings / Gestalt</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-graphing-principles.html"><a href="2-graphing-principles.html#grouping-examples"><i class="fa fa-check"></i><b>2.2.1</b> Grouping Examples</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-graphing-principles.html"><a href="2-graphing-principles.html#example-warpbreaks"><i class="fa fa-check"></i><b>2.2.2</b> Example: Warpbreaks</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-graphing-principles.html"><a href="2-graphing-principles.html#color-scales"><i class="fa fa-check"></i><b>2.3</b> “Color” Scales</a></li>
<li class="chapter" data-level="2.4" data-path="2-graphing-principles.html"><a href="2-graphing-principles.html#exercises-1"><i class="fa fa-check"></i><b>2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html"><i class="fa fa-check"></i><b>3</b> Amounts &amp; Proportions</a><ul>
<li class="chapter" data-level="3.1" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#example-1"><i class="fa fa-check"></i><b>3.2</b> Example 1</a></li>
<li class="chapter" data-level="3.3" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#example-2"><i class="fa fa-check"></i><b>3.3</b> Example 2</a></li>
<li class="chapter" data-level="3.4" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#tableau-toolbox"><i class="fa fa-check"></i><b>3.4</b> Tableau Toolbox</a></li>
<li class="chapter" data-level="3.5" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#example-3"><i class="fa fa-check"></i><b>3.5</b> Example 3</a></li>
<li class="chapter" data-level="3.6" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#proportions"><i class="fa fa-check"></i><b>3.6</b> Proportions</a></li>
<li class="chapter" data-level="3.7" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#single-set"><i class="fa fa-check"></i><b>3.7</b> Single Set</a><ul>
<li class="chapter" data-level="3.7.1" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#pie-charts"><i class="fa fa-check"></i><b>3.7.1</b> Pie Charts</a></li>
<li class="chapter" data-level="3.7.2" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#stacked-bar"><i class="fa fa-check"></i><b>3.7.2</b> Stacked Bar</a></li>
<li class="chapter" data-level="3.7.3" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#side-by-side-barchart"><i class="fa fa-check"></i><b>3.7.3</b> Side-by-side Barchart</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#multiple-sets-of-proportions"><i class="fa fa-check"></i><b>3.8</b> Multiple Sets of Proportions</a><ul>
<li class="chapter" data-level="3.8.1" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#faceted-bar-charts"><i class="fa fa-check"></i><b>3.8.1</b> Faceted Bar charts</a></li>
<li class="chapter" data-level="3.8.2" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#side-by-side-stacked-barcharts"><i class="fa fa-check"></i><b>3.8.2</b> Side-by-Side Stacked Barcharts</a></li>
<li class="chapter" data-level="3.8.3" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#mosiac-plots"><i class="fa fa-check"></i><b>3.8.3</b> Mosiac plots</a></li>
<li class="chapter" data-level="3.8.4" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#alluvial-plots"><i class="fa fa-check"></i><b>3.8.4</b> Alluvial Plots</a></li>
<li class="chapter" data-level="3.8.5" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#tree-graphs"><i class="fa fa-check"></i><b>3.8.5</b> Tree graphs</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="3-amounts-proportions.html"><a href="3-amounts-proportions.html#exercises-2"><i class="fa fa-check"></i><b>3.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-distributions.html"><a href="4-distributions.html"><i class="fa fa-check"></i><b>4</b> Distributions</a><ul>
<li class="chapter" data-level="4.0.1" data-path="4-distributions.html"><a href="4-distributions.html#small-samples"><i class="fa fa-check"></i><b>4.0.1</b> Small samples</a></li>
<li class="chapter" data-level="4.0.2" data-path="4-distributions.html"><a href="4-distributions.html#histograms"><i class="fa fa-check"></i><b>4.0.2</b> Histograms</a></li>
<li class="chapter" data-level="4.0.3" data-path="4-distributions.html"><a href="4-distributions.html#density-plots"><i class="fa fa-check"></i><b>4.0.3</b> Density plots</a></li>
<li class="chapter" data-level="4.0.4" data-path="4-distributions.html"><a href="4-distributions.html#faceting"><i class="fa fa-check"></i><b>4.0.4</b> Faceting</a></li>
<li class="chapter" data-level="4.0.5" data-path="4-distributions.html"><a href="4-distributions.html#stacking"><i class="fa fa-check"></i><b>4.0.5</b> Stacking</a></li>
<li class="chapter" data-level="4.0.6" data-path="4-distributions.html"><a href="4-distributions.html#overlapping-curves"><i class="fa fa-check"></i><b>4.0.6</b> Overlapping curves</a></li>
<li class="chapter" data-level="4.1" data-path="4-distributions.html"><a href="4-distributions.html#many-distributions"><i class="fa fa-check"></i><b>4.1</b> Many distributions</a><ul>
<li class="chapter" data-level="4.1.1" data-path="4-distributions.html"><a href="4-distributions.html#boxplots"><i class="fa fa-check"></i><b>4.1.1</b> Boxplots</a></li>
<li class="chapter" data-level="4.1.2" data-path="4-distributions.html"><a href="4-distributions.html#ridge-plots"><i class="fa fa-check"></i><b>4.1.2</b> Ridge Plots</a></li>
<li class="chapter" data-level="4.1.3" data-path="4-distributions.html"><a href="4-distributions.html#violin-plots"><i class="fa fa-check"></i><b>4.1.3</b> Violin Plots</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-distributions.html"><a href="4-distributions.html#exercises-3"><i class="fa fa-check"></i><b>4.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html"><i class="fa fa-check"></i><b>5</b> X-Y Relationships</a><ul>
<li class="chapter" data-level="5.1" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#scatter-plots"><i class="fa fa-check"></i><b>5.1</b> Scatter plots</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#pairs-plots-all-vs-all-scatterplots"><i class="fa fa-check"></i><b>5.1.1</b> Pairs plots (All-vs-all scatterplots)</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#correlation-plots"><i class="fa fa-check"></i><b>5.2</b> Correlation Plots</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#pearsons-correlation-coefficient"><i class="fa fa-check"></i><b>5.2.1</b> Pearson’s Correlation Coefficient</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#overplotting"><i class="fa fa-check"></i><b>5.3</b> Overplotting</a><ul>
<li class="chapter" data-level="5.3.1" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#transparency"><i class="fa fa-check"></i><b>5.3.1</b> Transparency</a></li>
<li class="chapter" data-level="5.3.2" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#intensity-maps"><i class="fa fa-check"></i><b>5.3.2</b> Intensity Maps</a></li>
<li class="chapter" data-level="5.3.3" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#contour-plots"><i class="fa fa-check"></i><b>5.3.3</b> Contour Plots</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#regression-lines"><i class="fa fa-check"></i><b>5.4</b> Regression Lines</a></li>
<li class="chapter" data-level="5.5" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#plot-building-process"><i class="fa fa-check"></i><b>5.5</b> Plot building process</a></li>
<li class="chapter" data-level="5.6" data-path="5-x-y-relationships.html"><a href="5-x-y-relationships.html#exercises-4"><i class="fa fa-check"></i><b>5.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-geographic.html"><a href="6-geographic.html"><i class="fa fa-check"></i><b>6</b> Geographic</a><ul>
<li class="chapter" data-level="6.1" data-path="6-geographic.html"><a href="6-geographic.html#projections"><i class="fa fa-check"></i><b>6.1</b> Projections</a></li>
<li class="chapter" data-level="6.2" data-path="6-geographic.html"><a href="6-geographic.html#map-layers"><i class="fa fa-check"></i><b>6.2</b> Map Layers</a></li>
<li class="chapter" data-level="6.3" data-path="6-geographic.html"><a href="6-geographic.html#chloropleths"><i class="fa fa-check"></i><b>6.3</b> Chloropleths</a></li>
<li class="chapter" data-level="6.4" data-path="6-geographic.html"><a href="6-geographic.html#chloropleths-in-tableau"><i class="fa fa-check"></i><b>6.4</b> Chloropleths in Tableau</a></li>
<li class="chapter" data-level="6.5" data-path="6-geographic.html"><a href="6-geographic.html#exercises-5"><i class="fa fa-check"></i><b>6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html"><i class="fa fa-check"></i><b>7</b> What to Graph</a><ul>
<li class="chapter" data-level="7.1" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#examples"><i class="fa fa-check"></i><b>7.1</b> Examples</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#example-vehicle-deaths"><i class="fa fa-check"></i><b>7.1.1</b> Example: Vehicle Deaths</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#example-military-budgets"><i class="fa fa-check"></i><b>7.1.2</b> Example: Military Budgets</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#example-gdp"><i class="fa fa-check"></i><b>7.1.3</b> Example: GDP</a></li>
<li class="chapter" data-level="7.1.4" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#example-cummulative-iphone-sales"><i class="fa fa-check"></i><b>7.1.4</b> Example: Cummulative Iphone Sales</a></li>
<li class="chapter" data-level="7.1.5" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#example-disease-mortality-vs-fatality-rates"><i class="fa fa-check"></i><b>7.1.5</b> Example: Disease Mortality vs Fatality Rates</a></li>
<li class="chapter" data-level="7.1.6" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#seasonal-unemployment"><i class="fa fa-check"></i><b>7.1.6</b> Seasonal Unemployment</a></li>
<li class="chapter" data-level="7.1.7" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#example-age-standardization"><i class="fa fa-check"></i><b>7.1.7</b> Example: Age Standardization</a></li>
<li class="chapter" data-level="7.1.8" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#example-maternity-deaths"><i class="fa fa-check"></i><b>7.1.8</b> Example Maternity Deaths</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-what-to-graph.html"><a href="7-what-to-graph.html#exercises-6"><i class="fa fa-check"></i><b>7.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-finding-data.html"><a href="8-finding-data.html"><i class="fa fa-check"></i><b>8</b> Finding Data</a><ul>
<li class="chapter" data-level="8.1" data-path="8-finding-data.html"><a href="8-finding-data.html#examples-1"><i class="fa fa-check"></i><b>8.1</b> Examples</a></li>
<li class="chapter" data-level="8.2" data-path="8-finding-data.html"><a href="8-finding-data.html#classroom-discussion-topics"><i class="fa fa-check"></i><b>8.2</b> Classroom Discussion Topics</a><ul>
<li class="chapter" data-level="8.2.1" data-path="8-finding-data.html"><a href="8-finding-data.html#bicycle-safety"><i class="fa fa-check"></i><b>8.2.1</b> Bicycle Safety</a></li>
<li class="chapter" data-level="8.2.2" data-path="8-finding-data.html"><a href="8-finding-data.html#asthma-prevalance"><i class="fa fa-check"></i><b>8.2.2</b> Asthma prevalance</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="8-finding-data.html"><a href="8-finding-data.html#exercises-7"><i class="fa fa-check"></i><b>8.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-thinking-conditionally.html"><a href="9-thinking-conditionally.html"><i class="fa fa-check"></i><b>9</b> Thinking Conditionally</a><ul>
<li class="chapter" data-level="9.1" data-path="9-thinking-conditionally.html"><a href="9-thinking-conditionally.html#simple-examples"><i class="fa fa-check"></i><b>9.1</b> Simple Examples</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-thinking-conditionally.html"><a href="9-thinking-conditionally.html#gender-bias-in-admission-rates."><i class="fa fa-check"></i><b>9.1.1</b> Gender Bias in Admission Rates.</a></li>
<li class="chapter" data-level="9.1.2" data-path="9-thinking-conditionally.html"><a href="9-thinking-conditionally.html#kidney-stone-treatment"><i class="fa fa-check"></i><b>9.1.2</b> Kidney Stone Treatment</a></li>
<li class="chapter" data-level="9.1.3" data-path="9-thinking-conditionally.html"><a href="9-thinking-conditionally.html#build-your-own"><i class="fa fa-check"></i><b>9.1.3</b> Build your own</a></li>
<li class="chapter" data-level="9.1.4" data-path="9-thinking-conditionally.html"><a href="9-thinking-conditionally.html#in-practice"><i class="fa fa-check"></i><b>9.1.4</b> In Practice</a></li>
<li class="chapter" data-level="9.1.5" data-path="9-thinking-conditionally.html"><a href="9-thinking-conditionally.html#corona-virus-example"><i class="fa fa-check"></i><b>9.1.5</b> Corona Virus Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-presentations.html"><a href="10-presentations.html"><i class="fa fa-check"></i><b>10</b> Presentations</a><ul>
<li class="chapter" data-level="10.1" data-path="10-presentations.html"><a href="10-presentations.html#introduction-3"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="10-presentations.html"><a href="10-presentations.html#audience"><i class="fa fa-check"></i><b>10.2</b> Audience</a></li>
<li class="chapter" data-level="10.3" data-path="10-presentations.html"><a href="10-presentations.html#outline"><i class="fa fa-check"></i><b>10.3</b> Outline</a></li>
<li class="chapter" data-level="10.4" data-path="10-presentations.html"><a href="10-presentations.html#figures"><i class="fa fa-check"></i><b>10.4</b> Figures</a></li>
<li class="chapter" data-level="10.5" data-path="10-presentations.html"><a href="10-presentations.html#presentations-1"><i class="fa fa-check"></i><b>10.5</b> Presentations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-dashboards.html"><a href="11-dashboards.html"><i class="fa fa-check"></i><b>11</b> Dashboards</a><ul>
<li class="chapter" data-level="11.1" data-path="11-dashboards.html"><a href="11-dashboards.html#introduction-4"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="11-dashboards.html"><a href="11-dashboards.html#examples-2"><i class="fa fa-check"></i><b>11.2</b> Examples</a><ul>
<li class="chapter" data-level="11.2.1" data-path="11-dashboards.html"><a href="11-dashboards.html#covid-19-example"><i class="fa fa-check"></i><b>11.2.1</b> Covid-19 Example</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-dashboards.html"><a href="11-dashboards.html#a-history-of-world-civilizations"><i class="fa fa-check"></i><b>11.2.2</b> A history of World Civilizations</a></li>
<li class="chapter" data-level="11.2.3" data-path="11-dashboards.html"><a href="11-dashboards.html#rainforest-biodiversity"><i class="fa fa-check"></i><b>11.2.3</b> Rainforest Biodiversity</a></li>
<li class="chapter" data-level="11.2.4" data-path="11-dashboards.html"><a href="11-dashboards.html#oil-rigs-in-texas"><i class="fa fa-check"></i><b>11.2.4</b> Oil Rigs in Texas</a></li>
<li class="chapter" data-level="11.2.5" data-path="11-dashboards.html"><a href="11-dashboards.html#women-in-politics"><i class="fa fa-check"></i><b>11.2.5</b> Women in Politics</a></li>
<li class="chapter" data-level="11.2.6" data-path="11-dashboards.html"><a href="11-dashboards.html#taxi-rides-in-nyc"><i class="fa fa-check"></i><b>11.2.6</b> Taxi Rides in NYC</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="11-dashboards.html"><a href="11-dashboards.html#deeper-thoughts"><i class="fa fa-check"></i><b>11.3</b> Deeper Thoughts</a><ul>
<li class="chapter" data-level="11.3.1" data-path="11-dashboards.html"><a href="11-dashboards.html#geographic-aggregation-level"><i class="fa fa-check"></i><b>11.3.1</b> Geographic Aggregation Level</a></li>
<li class="chapter" data-level="11.3.2" data-path="11-dashboards.html"><a href="11-dashboards.html#miscellaneous-aggregation-levels"><i class="fa fa-check"></i><b>11.3.2</b> Miscellaneous Aggregation Levels</a></li>
<li class="chapter" data-level="11.3.3" data-path="11-dashboards.html"><a href="11-dashboards.html#the-me-layer"><i class="fa fa-check"></i><b>11.3.3</b> The “Me” Layer</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="11-dashboards.html"><a href="11-dashboards.html#tableau-example"><i class="fa fa-check"></i><b>11.4</b> Tableau Example</a><ul>
<li class="chapter" data-level="11.4.1" data-path="11-dashboards.html"><a href="11-dashboards.html#data"><i class="fa fa-check"></i><b>11.4.1</b> Data</a></li>
<li class="chapter" data-level="11.4.2" data-path="11-dashboards.html"><a href="11-dashboards.html#tableau-1"><i class="fa fa-check"></i><b>11.4.2</b> Tableau</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="11-dashboards.html"><a href="11-dashboards.html#exercises-8"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-critiques.html"><a href="12-critiques.html"><i class="fa fa-check"></i><b>12</b> Critiques!</a><ul>
<li class="chapter" data-level="12.1" data-path="12-critiques.html"><a href="12-critiques.html#some-final-graphs"><i class="fa fa-check"></i><b>12.1</b> Some Final Graphs</a></li>
<li class="chapter" data-level="12.2" data-path="12-critiques.html"><a href="12-critiques.html#final-projects"><i class="fa fa-check"></i><b>12.2</b> Final Projects</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-malicious-graphics.html"><a href="13-malicious-graphics.html"><i class="fa fa-check"></i><b>13</b> Malicious Graphics</a><ul>
<li class="chapter" data-level="13.1" data-path="13-malicious-graphics.html"><a href="13-malicious-graphics.html#dual-y-axes"><i class="fa fa-check"></i><b>13.1</b> Dual Y-Axes</a></li>
<li class="chapter" data-level="13.2" data-path="13-malicious-graphics.html"><a href="13-malicious-graphics.html#examples-of-bad-graphs"><i class="fa fa-check"></i><b>13.2</b> Examples of bad graphs</a></li>
<li class="chapter" data-level="13.3" data-path="13-malicious-graphics.html"><a href="13-malicious-graphics.html#cherry-picking-issues"><i class="fa fa-check"></i><b>13.3</b> Cherry Picking Issues</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STA 141 - Exploratory Data Analysis and Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Data Wrangling</h1>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">1.1</span> Introduction</h2>
<p>The process of data wrangling often seems very situation dependent and there isn’t a unifying process. However this isn’t completely true. The process can be thought of as having four distinct steps.</p>
<table>
<colgroup>
<col width="13%" />
<col width="86%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"><strong>Step</strong></th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Import</td>
<td align="left">Get the data into software somehow. The structure of the data is just however it came in.</td>
</tr>
<tr class="even">
<td align="center">Tidy</td>
<td align="left">Restructure the data so that each row is an observation, and each column is a variable.</td>
</tr>
<tr class="odd">
<td align="center">Clean</td>
<td align="left">Correct variable types, consistent and useful labels, validation and correction.</td>
</tr>
<tr class="even">
<td align="center">Use</td>
<td align="left">Sub-setting the full data into a smaller set that addresses a particular question.</td>
</tr>
</tbody>
</table>
<p>In many real world examples, the data wrangling work is concentrated in only one first three steps. Typically you might be able to skip one or more steps, but pedagogically it is helpful to</p>
<div id="tidying" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Tidying</h3>
<p>The terminology of “tidy data” popularized by Hadley Wickham and his introduction to the concept lives in a <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">vignette</a> in the R <code>tidyr</code> package. I highly recommend reading Hadley Wickhams’s introduction as well as what I present here.</p>
<p>Data is usually described as “tidy” if it satisfies the following:</p>
<ol style="list-style-type: decimal">
<li>Each row represents an observation.</li>
<li>Each column represents a variable.</li>
<li>Each table of data represents a different type of observational unit.</li>
</ol>
<p>The difficult part is recognizing what constitutes an observation and what constitutes a variable. Often I like to think that the observations represent a noun and each now has multiple variables that adjectives that describe the noun. In particular I think that the attributes should be applicable to every single observation. If your data has a large number of <code>NA</code> values, that is a symptom of storing the data in a messy (non-tidy) format.</p>
<p>Suppose I have an address book where I keep email addresses, phone numbers, and other contact information. However, because different people have several different types of contact information, it would be a bad idea to have one row per person because then we’d need a column for work email, personal email, home phone, work phone, cell phone, twitter handle, reddit user name, etc. Instead, store the information with a single row representing a particular contact.</p>
<table style="width:69%;">
<colgroup>
<col width="12%" />
<col width="18%" />
<col width="38%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Person</th>
<th align="center">Type</th>
<th align="center">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Derek</td>
<td align="center">Work Email</td>
<td align="center"><a href="mailto:derek.sonderegger@nau.edu" class="email">derek.sonderegger@nau.edu</a></td>
</tr>
<tr class="even">
<td align="center">Derek</td>
<td align="center">Cell Phone</td>
<td align="center">970-867-5309</td>
</tr>
<tr class="odd">
<td align="center">Derek</td>
<td align="center">Twitter</td>
<td align="center">@D_Sonderegger</td>
</tr>
<tr class="even">
<td align="center">Derek</td>
<td align="center">Github</td>
<td align="center">dereksonderegger</td>
</tr>
<tr class="odd">
<td align="center">Mom</td>
<td align="center">Home Phone</td>
<td align="center">555-867-5309</td>
</tr>
</tbody>
</table>
<p>For a more challenging example, suppose we have grade book where we’ve stored students scores for four different homework assignments.</p>
<table style="width:53%;">
<colgroup>
<col width="13%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">name</th>
<th align="center">HW.1</th>
<th align="center">HW.2</th>
<th align="center">HW.3</th>
<th align="center">HW.4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Alison</td>
<td align="center">8</td>
<td align="center">5</td>
<td align="center">8</td>
<td align="center">4</td>
</tr>
<tr class="even">
<td align="center">Brandon</td>
<td align="center">5</td>
<td align="center">3</td>
<td align="center">6</td>
<td align="center">9</td>
</tr>
<tr class="odd">
<td align="center">Charles</td>
<td align="center">9</td>
<td align="center">7</td>
<td align="center">9</td>
<td align="center">10</td>
</tr>
</tbody>
</table>
<p>In this case we are considering each row to represent a student and each variable represents homework score. An alternative representation would be for each row to represent a single score.</p>
<table style="width:43%;">
<colgroup>
<col width="13%" />
<col width="18%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">name</th>
<th align="center">Assignment</th>
<th align="center">Score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Alison</td>
<td align="center">HW.1</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">Brandon</td>
<td align="center">HW.1</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">Charles</td>
<td align="center">HW.1</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td align="center">Alison</td>
<td align="center">HW.2</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">Brandon</td>
<td align="center">HW.2</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="center">Charles</td>
<td align="center">HW.2</td>
<td align="center">7</td>
</tr>
<tr class="odd">
<td align="center">Alison</td>
<td align="center">HW.3</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">Brandon</td>
<td align="center">HW.3</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">Charles</td>
<td align="center">HW.3</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td align="center">Alison</td>
<td align="center">HW.4</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td align="center">Brandon</td>
<td align="center">HW.4</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td align="center">Charles</td>
<td align="center">HW.4</td>
<td align="center">10</td>
</tr>
</tbody>
</table>
<p>Either representation is fine in this case, because each student should have the same number of assignments. However, if I was combining grade books from multiple times I’ve taught the course, the first option won’t work because sometimes I assign projects and sometimes not. So the tidy version of the data would be to have a table <code>scores</code> where each row represents a single assignment from a particular student.</p>
</div>
<div id="cleaning" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Cleaning</h3>
<p>The cleaning step is usually highly dependent on the data set content. This step involves</p>
<ol style="list-style-type: decimal">
<li>Making sure every variable has the right type. For example, make sure that dates are dates, not character strings.</li>
<li>Fix factor labels and sort order.</li>
<li>Verify numeric values are reasonable.</li>
<li>Create (some) calculated variables</li>
</ol>
<p>Most of our data frame manipulation tools are designed to work with tidy data. As a result, cleaning is most easily done after the data set structure has been tidied. Therefore,I recommend first performing the reshaping tidying step and <em>then</em> perform the cleaning.</p>
</div>
<div id="use" class="section level3">
<h3><span class="header-section-number">1.1.3</span> Use</h3>
<p>In this step, we concentrate on the research question of interest. Often this involves calculating summary statistics, calculating selecting only particular rows of data, and finally creating graphs and models.</p>
</div>
</div>
<div id="tableau" class="section level2">
<h2><span class="header-section-number">1.2</span> Tableau</h2>
<p>Tableau comes with two pieces of software, <code>Tableau Prep</code> and <code>Tableau</code>. The prep software is intended to support the data tidying, cleaning, and summarization steps. Then we save the result to a file and open the cleaned up data in Tableau to do the visualization.</p>
<p>This course has access to both Tableau and Tableau Prep through an academic license.</p>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://www.tableau.com/products/prep/download">https://www.tableau.com/products/prep/download</a> to download both products.</li>
<li>Select each product download link to get started. When prompted, enter your school email address for Business E-mail and enter the name of your school for Organization.</li>
<li>Activate with your product key which will be distributed via email or on Bblearn.</li>
</ol>
<p>This license will work through the semester. You may continue using Tableau after the class is over by individually requesting their own one-year license through the <a href="https://www.tableau.com/academic/students">Tableau for Students</a> program.</p>
</div>
<div id="importing-data" class="section level2">
<h2><span class="header-section-number">1.3</span> Importing data</h2>
<p>Often data will be stored in a Comma Separated Values file that has a <code>.csv</code> file suffix. These types of files store data tables, and use a comma to separate the columns. Spreadsheet programs will recognize these files and show columns for <code>Student Name</code>, <code>Exam 1</code>, <code>Exam 2</code> and the <code>Final Exam</code>. However, if you open these files using a text reader program, they’ll look something like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="1-data-wrangling.html#cb1-1"></a>Student Name,Exam <span class="dv">1</span>,Exam <span class="dv">2</span>,Final Exam</span>
<span id="cb1-2"><a href="1-data-wrangling.html#cb1-2"></a>Alice,<span class="dv">87</span>,<span class="dv">87</span>,<span class="dv">81</span></span>
<span id="cb1-3"><a href="1-data-wrangling.html#cb1-3"></a>Bob,<span class="dv">91</span>,<span class="dv">88</span>,<span class="dv">85</span></span>
<span id="cb1-4"><a href="1-data-wrangling.html#cb1-4"></a>Charlie,<span class="dv">88</span>,<span class="dv">79</span>,<span class="dv">92</span></span></code></pre></div>
<p>Below is a video showing how to open up this same data in Tableau Prep.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ruWnLWGcwBI" frameborder="0" allowfullscreen>
</iframe>
<p>The import step gives a rotated view of the data and generally that doesn’t bother me, but for purposes of show what the imported data looks like, we’ll add a cleaning step that doesn’t do anything but will show the data. In general I won’t keep this step in my cleaning workflow, but it is handy to know how to do this.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/f6KhNAlBNtU" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="tidying-or-reshaping" class="section level2">
<h2><span class="header-section-number">1.4</span> Tidying or Reshaping</h2>
<p>Often source data is stored in a structure that isn’t useful for subsequent analysis. When the data isn’t a format of one observation per row and one variable per column, we need to fix those issues before proceeding.</p>
<div id="gather" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Gather</h3>
<p>When data is in the <em>“wide”</em> format, we might need to convert it into <em>“long”</em> format. For an example, suppose we have a gradebook with a few students.</p>
<table style="width:57%;">
<caption>Wide Format</caption>
<colgroup>
<col width="13%" />
<col width="12%" />
<col width="12%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Name</th>
<th align="center">Exam 1</th>
<th align="center">Exam 2</th>
<th align="center">Final Exam</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Alison</td>
<td align="center">87</td>
<td align="center">87</td>
<td align="center">81</td>
</tr>
<tr class="even">
<td align="center">Bob</td>
<td align="center">91</td>
<td align="center">88</td>
<td align="center">85</td>
</tr>
<tr class="odd">
<td align="center">Charlie</td>
<td align="center">88</td>
<td align="center">79</td>
<td align="center">92</td>
</tr>
</tbody>
</table>
<p>What we want to do is turn this data frame from a <em>wide</em> data frame into a <em>long</em> data frame. In MS Excel and Tableau, this is called pivoting. Essentially I’d like to create a data frame with three columns: <code>Name</code>, <code>Assessment</code>, and <code>Score</code>. That is to say that each homework datum really has three pieces of information: who it came from, which homework it was, and what the score was. It doesn’t conceptually matter if I store it as 3 rows of 4 columns or 12 rows so long as there is a way to identify how a student scored on a particular homework. So we want to reshape the three Exam columns into just two columns (Assessment and Score).</p>
<table style="width:43%;">
<caption>Long Format</caption>
<colgroup>
<col width="13%" />
<col width="18%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Name</th>
<th align="center">Assessment</th>
<th align="center">Score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Alison</td>
<td align="center">Exam 1</td>
<td align="center">87</td>
</tr>
<tr class="even">
<td align="center">Bob</td>
<td align="center">Exam 1</td>
<td align="center">91</td>
</tr>
<tr class="odd">
<td align="center">Charlie</td>
<td align="center">Exam 1</td>
<td align="center">88</td>
</tr>
<tr class="even">
<td align="center">Alison</td>
<td align="center">Exam 2</td>
<td align="center">87</td>
</tr>
<tr class="odd">
<td align="center">Bob</td>
<td align="center">Exam 2</td>
<td align="center">88</td>
</tr>
<tr class="even">
<td align="center">Charlie</td>
<td align="center">Exam 2</td>
<td align="center">79</td>
</tr>
<tr class="odd">
<td align="center">Alison</td>
<td align="center">Final Exam</td>
<td align="center">81</td>
</tr>
<tr class="even">
<td align="center">Bob</td>
<td align="center">Final Exam</td>
<td align="center">85</td>
</tr>
<tr class="odd">
<td align="center">Charlie</td>
<td align="center">Final Exam</td>
<td align="center">92</td>
</tr>
</tbody>
</table>
<iframe width="560" height="315" src="https://www.youtube.com/embed/suCAb8qJOSM" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="spread" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Spread</h3>
<p>There are times that we need to convert a <em>“long”</em> dataset into <em>“wide”</em> format. This is exactly the reverse function of the gather. Our example will be to undo the gather step from the previous. Again in Tableau, this is called pivoting, but we’ll make sure that we are turning rows into columns.</p>
<p>The tricky part is what variable goes into which pivot field. The top box specifies what the new column headers will be and the bottom box specifies what the cell values will be.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/qZ8L3KrAwnE" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="column-splitting" class="section level3">
<h3><span class="header-section-number">1.4.3</span> Column Splitting</h3>
<p>Sometimes we have columns where we actually have two pieces of information stored and we have to split the single column into multiple columns.</p>
<p>For example, we might have data about across the country, where the city name obnoxiously includes the state. It would be good to split the <code>Name</code> column into <code>City</code> and <code>State</code> columns. For example,</p>
<table style="width:40%;">
<colgroup>
<col width="22%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Name</th>
<th align="center">Population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Phoenix, AZ</td>
<td align="center">1660272</td>
</tr>
<tr class="even">
<td align="center">Flagstaff, AZ</td>
<td align="center">73964</td>
</tr>
<tr class="odd">
<td align="center">Tucson, AZ</td>
<td align="center">545975</td>
</tr>
</tbody>
</table>
<iframe width="560" height="315" src="https://www.youtube.com/embed/hrr_xYy8v-U" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="new-column-via-calculation" class="section level3">
<h3><span class="header-section-number">1.4.4</span> New Column via Calculation</h3>
<p>Often we need to take a column and create some sort of calculation. For example, if we are given some information (say student height) in inches, we might want to calculate their height in centimeters by multiplying each height value by <span class="math inline">\(2.54\)</span> and naming the result <code>Height (cm)</code>.</p>
<table style="width:62%;">
<caption>Student Heights</caption>
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="12%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Grade</th>
<th align="center">Gender</th>
<th align="center">Height</th>
<th align="center">Height (cm)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1st Grade</td>
<td align="center">Male</td>
<td align="center">44</td>
<td align="center">111.8</td>
</tr>
<tr class="even">
<td align="center">1st Grade</td>
<td align="center">Male</td>
<td align="center">42</td>
<td align="center">106.7</td>
</tr>
<tr class="odd">
<td align="center">1st Grade</td>
<td align="center">Female</td>
<td align="center">42</td>
<td align="center">106.7</td>
</tr>
<tr class="even">
<td align="center">1st Grade</td>
<td align="center">Female</td>
<td align="center">40</td>
<td align="center">101.6</td>
</tr>
<tr class="odd">
<td align="center">12th Grade</td>
<td align="center">Male</td>
<td align="center">70</td>
<td align="center">177.8</td>
</tr>
<tr class="even">
<td align="center">12th Grade</td>
<td align="center">Male</td>
<td align="center">68</td>
<td align="center">172.7</td>
</tr>
<tr class="odd">
<td align="center">12th Grade</td>
<td align="center">Male</td>
<td align="center">69</td>
<td align="center">175.3</td>
</tr>
<tr class="even">
<td align="center">12th Grade</td>
<td align="center">Female</td>
<td align="center">64</td>
<td align="center">162.6</td>
</tr>
<tr class="odd">
<td align="center">12th Grade</td>
<td align="center">Female</td>
<td align="center">65</td>
<td align="center">165.1</td>
</tr>
</tbody>
</table>
<p>The issue in Tableau is to make sure you remember how to specify a column in a formula. The syntax is <code>[column_name]</code> and then you can use that quantity in whatever formula you want.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8YvXg1HEqdc" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="aggregation" class="section level3">
<h3><span class="header-section-number">1.4.5</span> Aggregation</h3>
<p>Given a data set we also want to be able to calculate summary for various columns. For example, we might want to calculate the mean height for each grade level, or perhaps each gender within each grade level. Notice that we end up with a data set with <em>fewer rows</em>.</p>
<table style="width:49%;">
<caption>Student Heights: Summarized</caption>
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Grade</th>
<th align="center">Gender</th>
<th align="center">Avg Height</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">12th Grade</td>
<td align="center">Female</td>
<td align="center">64.5</td>
</tr>
<tr class="even">
<td align="center">12th Grade</td>
<td align="center">Male</td>
<td align="center">69</td>
</tr>
<tr class="odd">
<td align="center">1st Grade</td>
<td align="center">Female</td>
<td align="center">41</td>
</tr>
<tr class="even">
<td align="center">1st Grade</td>
<td align="center">Male</td>
<td align="center">43</td>
</tr>
</tbody>
</table>
<iframe width="560" height="315" src="https://www.youtube.com/embed/nMSppaAHTSM" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="new-column-with-aggregation" class="section level3">
<h3><span class="header-section-number">1.4.6</span> New Column with Aggregation</h3>
<p>There are many cases where we need to create a calculated column, but the calculation involves
some aggregated information. For, if have the number of males and females in each grade and we want to calculate the percentage of males and females in each grade. To do this we need to aggregate data to count the number of students in each grade and then divide the number of males or females in each grade by the total number of students in the grade.</p>
<table style="width:54%;">
<caption>Student Heights: Summarized</caption>
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Grade</th>
<th align="center">Gender</th>
<th align="center">Grade_Gender_n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">12th Grade</td>
<td align="center">Female</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">12th Grade</td>
<td align="center">Male</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="center">1st Grade</td>
<td align="center">Female</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">1st Grade</td>
<td align="center">Male</td>
<td align="center">2</td>
</tr>
</tbody>
</table>
<table style="width:86%;">
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="23%" />
<col width="13%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Grade</th>
<th align="center">Gender</th>
<th align="center">Grade_Gender_n</th>
<th align="center">Grade_n</th>
<th align="center">Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">12th Grade</td>
<td align="center">Female</td>
<td align="center">2</td>
<td align="center">5</td>
<td align="center">0.4</td>
</tr>
<tr class="even">
<td align="center">12th Grade</td>
<td align="center">Male</td>
<td align="center">3</td>
<td align="center">5</td>
<td align="center">0.6</td>
</tr>
<tr class="odd">
<td align="center">1st Grade</td>
<td align="center">Female</td>
<td align="center">2</td>
<td align="center">4</td>
<td align="center">0.5</td>
</tr>
<tr class="even">
<td align="center">1st Grade</td>
<td align="center">Male</td>
<td align="center">2</td>
<td align="center">4</td>
<td align="center">0.5</td>
</tr>
</tbody>
</table>
<p>Anytime you need to include an aggregation value in formula, we need to specify any grouping information for calculating the aggregate. The code for this is to specify the grouping variable and the aggregation function and column. The code is: <code>{FIXED [Group]: SUM[Value]}</code></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2USmtAcluEY" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="unions" class="section level3">
<h3><span class="header-section-number">1.4.7</span> Unions</h3>
<p>One way that we could “squish” two data sets together is if they have the same columns and we essentially just want to add new rows to a data set.</p>
<p>In this example we have two tables with identical column names and types and we just want to stack the two tables to create a single table that contains all the rows of data.</p>
<table style="width:72%;">
<caption>Parents</caption>
<colgroup>
<col width="15%" />
<col width="13%" />
<col width="43%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">PersonID</th>
<th align="center">Type</th>
<th align="center">Handle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">P0001</td>
<td align="center">email</td>
<td align="center"><a href="mailto:derek.sonderegger@nau.edu" class="email">derek.sonderegger@nau.edu</a></td>
</tr>
<tr class="even">
<td align="center">P0001</td>
<td align="center">Twitter</td>
<td align="center">@D_Sonderegger</td>
</tr>
<tr class="odd">
<td align="center">P0002</td>
<td align="center">email</td>
<td align="center"><a href="mailto:aubrey.sonderegger@yahoo.com" class="email">aubrey.sonderegger@yahoo.com</a></td>
</tr>
</tbody>
</table>
<table style="width:71%;">
<caption>Kids</caption>
<colgroup>
<col width="15%" />
<col width="13%" />
<col width="41%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">PersonID</th>
<th align="center">Type</th>
<th align="center">Handle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">P0003</td>
<td align="center">email</td>
<td align="center"><a href="mailto:Elise.Sonderegger@gmail.com" class="email">Elise.Sonderegger@gmail.com</a></td>
</tr>
<tr class="even">
<td align="center">P0003</td>
<td align="center">Twitter</td>
<td align="center">@UnicornsRule</td>
</tr>
</tbody>
</table>
<p>Taking a union of these two data sets just squishes them together vertically.</p>
<table style="width:72%;">
<caption>Parents &amp; Kid Unioned Together</caption>
<colgroup>
<col width="15%" />
<col width="13%" />
<col width="43%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">PersonID</th>
<th align="center">Type</th>
<th align="center">Handle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">P0001</td>
<td align="center">email</td>
<td align="center"><a href="mailto:derek.sonderegger@nau.edu" class="email">derek.sonderegger@nau.edu</a></td>
</tr>
<tr class="even">
<td align="center">P0001</td>
<td align="center">Twitter</td>
<td align="center">@D_Sonderegger</td>
</tr>
<tr class="odd">
<td align="center">P0002</td>
<td align="center">email</td>
<td align="center"><a href="mailto:aubrey.sonderegger@yahoo.com" class="email">aubrey.sonderegger@yahoo.com</a></td>
</tr>
<tr class="even">
<td align="center">P0003</td>
<td align="center">email</td>
<td align="center"><a href="mailto:Elise.Sonderegger@gmail.com" class="email">Elise.Sonderegger@gmail.com</a></td>
</tr>
<tr class="odd">
<td align="center">P0003</td>
<td align="center">Twitter</td>
<td align="center">@UnicornsRule</td>
</tr>
</tbody>
</table>
<iframe width="560" height="315" src="https://www.youtube.com/embed/UqwX79lHk-Y" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="joins" class="section level3">
<h3><span class="header-section-number">1.4.8</span> Joins</h3>
<p>There are many cases where we have two or more data sets that are related and we need to squish them together to make a table with more columns. For example we might have a data set <code>People</code> that contains a unique numeric code for each person, first and last names, and birth dates. We might also have a data set of <code>Contacts</code> which has the person’s unique numeric code and the contact type and value.</p>
<table style="width:51%;">
<caption>People</caption>
<colgroup>
<col width="15%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">PersonID</th>
<th align="center">First.Name</th>
<th align="center">Birthday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">P0001</td>
<td align="center">Derek</td>
<td align="center">01/10/1976</td>
</tr>
<tr class="even">
<td align="center">P0002</td>
<td align="center">Aubrey</td>
<td align="center">02/14/1980</td>
</tr>
<tr class="odd">
<td align="center">P0004</td>
<td align="center">Casey</td>
<td align="center">02/14/2015</td>
</tr>
</tbody>
</table>
<table style="width:72%;">
<caption>Contact Information</caption>
<colgroup>
<col width="15%" />
<col width="13%" />
<col width="43%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">PersonID</th>
<th align="center">Type</th>
<th align="center">Handle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">P0001</td>
<td align="center">email</td>
<td align="center"><a href="mailto:derek.sonderegger@nau.edu" class="email">derek.sonderegger@nau.edu</a></td>
</tr>
<tr class="even">
<td align="center">P0001</td>
<td align="center">Twitter</td>
<td align="center">@D_Sonderegger</td>
</tr>
<tr class="odd">
<td align="center">P0002</td>
<td align="center">email</td>
<td align="center"><a href="mailto:aubrey.sonderegger@yahoo.com" class="email">aubrey.sonderegger@yahoo.com</a></td>
</tr>
</tbody>
</table>
<p>The <code>PersonID</code> column links the two tables. But when we now have to ask what we should do about Casey. There are really two options:</p>
<table>
<colgroup>
<col width="26%" />
<col width="73%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Join Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Inner Join</td>
<td align="left">Only include rows for individuals that have information in both tables.</td>
</tr>
<tr class="even">
<td align="left">Full Join</td>
<td align="left">Include a row for for every row in either of the tables being joined. In this case, it results in a row Casey being included, but the contact information being left empty.</td>
</tr>
</tbody>
</table>
<p>A join squishes the two data sets together horizontally while making sure the rows match up because of one matching column that occurs in each data set. The inner join only returns rows that have data in both data sets.</p>
<table>
<caption>Inner Join</caption>
<colgroup>
<col width="14%" />
<col width="16%" />
<col width="16%" />
<col width="12%" />
<col width="39%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">PersonID</th>
<th align="center">First.Name</th>
<th align="center">Birthday</th>
<th align="center">Type</th>
<th align="center">Handle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">P0001</td>
<td align="center">Derek</td>
<td align="center">01/10/1976</td>
<td align="center">email</td>
<td align="center"><a href="mailto:derek.sonderegger@nau.edu" class="email">derek.sonderegger@nau.edu</a></td>
</tr>
<tr class="even">
<td align="center">P0001</td>
<td align="center">Derek</td>
<td align="center">01/10/1976</td>
<td align="center">Twitter</td>
<td align="center">@D_Sonderegger</td>
</tr>
<tr class="odd">
<td align="center">P0002</td>
<td align="center">Aubrey</td>
<td align="center">02/14/1980</td>
<td align="center">email</td>
<td align="center"><a href="mailto:aubrey.sonderegger@yahoo.com" class="email">aubrey.sonderegger@yahoo.com</a></td>
</tr>
</tbody>
</table>
<p>The outer join returns all possible rows that occur in either data set. Notice that Casey has a row in the <code>People</code> data set but doesn’t have a corresponding row in the <code>Contacts</code> table. So his row in the outer join has missing data for the contact information.</p>
<table>
<caption>Outer Join</caption>
<colgroup>
<col width="14%" />
<col width="16%" />
<col width="16%" />
<col width="12%" />
<col width="39%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">PersonID</th>
<th align="center">First.Name</th>
<th align="center">Birthday</th>
<th align="center">Type</th>
<th align="center">Handle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">P0001</td>
<td align="center">Derek</td>
<td align="center">01/10/1976</td>
<td align="center">email</td>
<td align="center"><a href="mailto:derek.sonderegger@nau.edu" class="email">derek.sonderegger@nau.edu</a></td>
</tr>
<tr class="even">
<td align="center">P0001</td>
<td align="center">Derek</td>
<td align="center">01/10/1976</td>
<td align="center">Twitter</td>
<td align="center">@D_Sonderegger</td>
</tr>
<tr class="odd">
<td align="center">P0002</td>
<td align="center">Aubrey</td>
<td align="center">02/14/1980</td>
<td align="center">email</td>
<td align="center"><a href="mailto:aubrey.sonderegger@yahoo.com" class="email">aubrey.sonderegger@yahoo.com</a></td>
</tr>
<tr class="even">
<td align="center">P0004</td>
<td align="center">Casey</td>
<td align="center">02/14/2015</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
</tbody>
</table>
<iframe width="560" height="315" src="https://www.youtube.com/embed/tEQQbN_-ZyY" frameborder="0" allowfullscreen>
</iframe>
</div>
</div>
<div id="exercises" class="section level2">
<h2><span class="header-section-number">1.5</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>We are given information about the maximum daily temperature from a weather station in Flagstaff, AZ. The file is available at the GitHub site that this book is hosted on. You can find it <a href="https://github.com/dereksonderegger/570L/raw/master/data-raw/FlagMaxTemp.csv">https://github.com/dereksonderegger/141/raw/master/data-raw/FlagMaxTemp.csv</a>. This file is in a wide format, where each row represents a month and the columns 1, 2, …, 31 represent the day of the month the observation was made.
<ol style="list-style-type: lower-alpha">
<li>Convert data set to the long format where the data has only four columns: <code>Year</code>, <code>Month</code>, <code>Day</code>, <code>Tmax</code>.</li>
<li>Calculate the average monthly maximum temperature for each Month in the dataset (So there will be 365 mean maximum temperatures). There are several days that have missing data, represented by the value <code>NA</code>. If you have a problem taking the mean with them in there, you likely haven’t converted the temperature from a character string to a numeric value.</li>
<li>Convert the average month maximums back to a wide data format where each line represents a year and there are 12 columns of temperature data (one for each month) along with a column for the year. <em>There will be a couple of months that still have missing data because the weather station was out of commission for those months and there was NO data for the entire month.</em></li>
<li>Save this table as a .csv file.</li>
</ol></li>
<li>A common task is to take a set of data that has multiple categorical variables and create a table of the number of cases for each combination. An introductory statistics textbook contains a dataset summarizing student surveys from several sections of an intro class. The two variables of interest for us are <code>Gender</code> and <code>Year</code> which are the students gender and year in college.
<ol style="list-style-type: lower-alpha">
<li><p>Download the dataset as a <code>.csv</code> file from the following website: <a href="http://www.lock5stat.com/datasets/StudentSurvey.csv" class="uri">http://www.lock5stat.com/datasets/StudentSurvey.csv</a></p></li>
<li><p>Notice that there are two survey responses that did not give their year in school. Perform a filter step to remove any row with the value of <code>null</code> in the <code>Year</code> column.</p></li>
<li><p>Produce a data set with eight rows that contains the number of responses for each gender:year combination.</p></li>
<li><p>Using a <code>pivot</code> command, produce a table of the number of responses in the following form:</p>
<table>
<thead>
<tr class="header">
<th align="center">Gender</th>
<th align="center">First Year</th>
<th align="center">Sophmore</th>
<th align="center">Junior</th>
<th align="center">Senior</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>Female</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center"><strong>Male</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table></li>
<li><p>Save this table as a .csv file.</p></li>
</ol></li>
<li>Read Chapter 2 in <em>The Truthful Art</em>.
<ol style="list-style-type: lower-alpha">
<li>On page 46, figure 2.2 asks you to list aspects of the figure that “seem fishy”. Before reading the rest of the chapter, list the things that seem fishy. After you’ve read the rest of the chapter, go back and examine the graph and reflect on why you didn’t notice certain deceptive issues on the first reading of the graph.</li>
<li>On page 55, figure 2.11 asks which chart is more aesthetically pleasing? Which do you think is more attractive and why?</li>
</ol></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="2-graphing-principles.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dereksonderegger/141/raw/master/01_Wrangling_Tableau.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
